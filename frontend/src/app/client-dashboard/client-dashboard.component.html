<div class="dashboard-container">
  <div class="container">
    <div class="dashboard-header">
      <div class="welcome-section">
        <h1>
          <i class="ri-dashboard-line"></i>
          Mon Tableau de Bord
        </h1>
        <p>Bienvenue, {{ userInfo?.username }}!</p>
      </div>
      <!-- juste un test  -->
      <div class="stats-cards">
        <div class="stat-card">
          <div class="stat-icon confirmed">
            <i class="ri-check-double-line"></i>
          </div>
          <div class="stat-content">
            <span class="stat-label">Confirmées</span>
            <span class="stat-value">{{ getConfirmedCount() }}</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon pending">
            <i class="ri-time-line"></i>
          </div>
          <div class="stat-content">
            <span class="stat-label">En attente</span>
            <span class="stat-value">{{ getPendingCount() }}</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon total">
            <i class="ri-list-check"></i>
          </div>
          <div class="stat-content">
            <span class="stat-label">Total</span>
            <span class="stat-value">{{ reservations.length }}</span>
          </div>
        </div>
      </div>
    </div>

    <div class="reservations-section">
      <h2>
        <i class="ri-calendar-check-line"></i>
        Mes Réservations
      </h2>

      <div *ngIf="isLoading" class="loading-state">
        <i class="ri-loader-4-line animate-spin"></i>
        <p>Chargement de vos réservations...</p>
      </div>

      <div *ngIf="!isLoading && reservations.length === 0" class="empty-state">
        <i class="ri-calendar-line"></i>
        <h3>Aucune réservation</h3>
        <p>Vous n'avez pas encore effectué de réservation</p>
        <a routerLink="/voyages-public" class="btn-base btn-default">
          <i class="ri-bus-line"></i>
          Découvrir les voyages
        </a>
      </div>

      <div
        *ngIf="!isLoading && reservations.length > 0"
        class="reservations-grid"
      >
        <div
          *ngFor="let reservation of reservations"
          class="client-reservation-card"
        >
          <div class="client-card-header">
            <div class="client-voyage-info">
              <h3>{{ reservation.voyage?.name || "Voyage" }}</h3>
              <p class="client-category-badge">
                <i class="ri-map-pin-line"></i>
                {{ reservation.category?.name || "Catégorie" }}
              </p>
            </div>
            <span
              class="client-status-badge"
              [ngClass]="getStatusBadgeClass(reservation)"
            >
              {{ getStatusText(reservation) }}
            </span>
          </div>

          <div class="client-card-body">
            <div class="client-info-row">
              <i class="ri-calendar-line"></i>
              <span>{{ reservation.date }}</span>
            </div>
            <div class="client-info-row">
              <i class="ri-group-line"></i>
              <span>{{ reservation.nombrePersonnes || 1 }} personne(s)</span>
            </div>
            <div class="client-info-row">
              <i class="ri-money-dollar-circle-line"></i>
              <span>{{ reservation.paid ? "Payé" : "Non payé" }}</span>
            </div>
          </div>

          <div class="client-card-footer">
            <button class="client-btn-view" (click)="viewDetails(reservation)">
              <i class="ri-eye-line"></i>
              Voir détails
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
